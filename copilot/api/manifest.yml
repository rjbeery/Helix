name: api
type: Load Balanced Web Service

image:
  build:
    dockerfile: ./apps/api/Dockerfile
    context: .
  port: 3001

http:
  path: /
  healthcheck:
    path: /health
    grace_period: 120s

cpu: 256
memory: 512
count: 1

variables:
  NODE_ENV: production

secrets:
  DATABASE_URL: /copilot/${COPILOT_APPLICATION_NAME}/${COPILOT_ENVIRONMENT_NAME}/secrets/DATABASE_URL
